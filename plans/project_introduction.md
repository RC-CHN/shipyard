# Shipyard 项目介绍

## 1. 项目定位：什么是 Shipyard？

**Shipyard** 是一个专为 AI Agent 设计的轻量级沙箱（Sandbox）环境。

在 AI Agent 的应用场景中，经常需要执行代码（如 Python）、运行 Shell 命令或操作文件系统。直接在宿主机或未隔离的环境中运行这些操作极具风险。Shipyard 提供了一套安全、隔离且可复用的执行环境，让 Agent 能够放心地“大展拳脚”。

它由三个核心部分组成：
*   **Bay (控制面)**: 负责管理沙箱的生命周期、调度资源和路由请求。
*   **Ship (执行面)**: 实际的容器化沙箱，提供 Python、Shell 和文件系统 API。
*   **Python SDK**: 方便上层应用（如 Agent 框架）快速集成。

## 2. 开发背景：为什么需要 Shipyard？

随着 LLM（大语言模型）和 AI Agent 的兴起，Agent 需要具备“行动”的能力，而不仅仅是“说话”。

*   **安全隔离需求**: Agent 生成的代码可能包含有害操作，必须在隔离环境中运行。
*   **状态保持需求**: 许多任务是多轮交互的（例如数据分析），需要保持 Python 解释器的状态（变量、函数定义等），而不是每次请求都重启。
*   **性能与开销**: 传统的虚拟机或为每个请求启动新容器的方式开销大、启动慢。Shipyard 专注于**轻量级**和**会话复用**，通过 Session ID 机制在同一个容器内隔离不同会话的工作目录，既保证了隔离性，又极大降低了资源消耗和启动延迟。
*   **灵活性**: 支持多种底层运行时（Docker, Podman, Kubernetes），适应从本地开发到生产集群的不同部署需求。

## 3. 核心能力：能做什么？

Shipyard 为 AI Agent 提供了以下核心能力：

### 3.1 有状态的 Python 代码执行
*   基于 IPython 内核，支持变量驻留和上下文保持。
*   适合数据分析、科学计算、代码生成与验证等场景。

### 3.2 Shell 命令执行
*   执行标准 Linux Shell 命令。
*   支持后台进程管理，适合运行长时间任务或系统工具。

### 3.3 文件系统操作
*   提供完整的文件读写、上传、删除、列表等能力。
*   **工作目录隔离**: 每个 Session 拥有独立的工作空间（`/workspace/{session_id}`），互不干扰。

### 3.4 数据持久化
*   支持跨容器重启的数据持久化。
*   在 Docker/Podman 下通过挂载宿主机目录，在 Kubernetes 下通过 PVC 实现。

## 4. 还有什么可以做的？（未来展望）

当前项目处于 **Technical Preview** 阶段，核心功能已就绪，但仍有广阔的扩展空间：

*   **增强安全性**: 进一步加固容器隔离，限制资源使用（CPU/内存配额），网络访问控制等。
*   **更多运行时支持**: 计划支持 `containerd` 等更多底层运行时。
*   **可观测性**: 增强日志、监控和审计功能，方便追踪 Agent 的行为。
*   **SDK 丰富化**: 提供更多语言的 SDK，或更高级的 Agent 框架集成（如 LangChain, AutoGen 集成）。
*   **镜像生态**: 构建预装常用数据科学或开发工具的 Ship 镜像，减少运行时安装依赖的时间。

## 总结

Shipyard 旨在成为 AI Agent 的“安全游乐场”，通过轻量、高效、隔离的设计，解决 Agent 执行代码和操作系统的安全与状态管理难题。
